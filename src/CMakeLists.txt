cmake_minimum_required(VERSION 3.13)
enable_testing()

add_compile_definitions(PROJECT_VERSION="${CMAKE_PROJECT_VERSION}")
file(GLOB sources "./*.cpp")
add_executable("${CMAKE_PROJECT_NAME}" ${sources})
set_property(TARGET "${CMAKE_PROJECT_NAME}" PROPERTY CXX_STANDARD 17)
if (CMAKE_SYSTEM_NAME STREQUAL "Linux")
    target_link_libraries("${CMAKE_PROJECT_NAME}" GL GLEW)
elseif (CMAKE_SYSTEM_NAME STREQUAL "Windows")
    target_link_options("${CMAKE_PROJECT_NAME}" BEFORE PRIVATE
        "-Wl,-subsystem,windows")
    target_link_options("${CMAKE_PROJECT_NAME}" BEFORE PRIVATE
        -static-libstdc++ -static-libgcc)
    target_link_libraries("${CMAKE_PROJECT_NAME}"
        mingw32 opengl32 glew32 comdlg32 win_resource)
endif()
target_link_libraries("${CMAKE_PROJECT_NAME}"
    resource SDL2main SDL2 pthread)
install(TARGETS "${CMAKE_PROJECT_NAME}" DESTINATION "bin")
